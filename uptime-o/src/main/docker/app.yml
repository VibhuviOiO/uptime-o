services:
  uptimeo-app:
    image: uptimeo:latest
    container_name: uptimeo-app
    env_file:
      - ./.env
    ports:
      - "8080:8080"
    volumes:
      # Persistent storage for uploaded images
      - uptimeo_uploads:/var/uptimeo/uploads
      # Persistent storage for logs
      - uptimeo_logs:/var/log/uptimeo
    healthcheck:
      test:
        - CMD
        - curl
        - -f
        - http://localhost:8080/management/health
      interval: 30s
      timeout: 10s
      retries: 5
      start_period: 60s
    restart: unless-stopped
    networks:
      - uptimeo

volumes:
  uptimeo_uploads:
  uptimeo_logs:

networks:
  uptimeo:
    name: uptimeo
    external: true