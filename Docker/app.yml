services:
  uptimeo-app:
    image: uptimeo:latest
    container_name: uptimeo-app
    volumes:
    - ./logs:/logs:Z
    environment:
      SPRING_DATASOURCE_URL: jdbc:postgresql://postgres:5432/uptimeo
      SPRING_DATASOURCE_USERNAME: uptimeo
      SPRING_DATASOURCE_PASSWORD: uptimeo
      SPRING_PROFILES_ACTIVE: prod,api-docs
      WEBSITE_TITLE: "RR Uptime"
      WEBSITE_DESCRIPTION: "Uptime Monitoring and Observability Platform"
      WEBSITE_KEYWORDS: "uptime,monitoring,observability,http,heartbeat"
      WEBSITE_AUTHOR: "UptimeO Team"
      WEBSITE_FAVICONPATH: "/content/images/favicon.ico"
      WEBSITE_LOGOPATH: "/content/images/logo.png"
      WEBSITE_LOGOWIDTH: 50
      WEBSITE_LOGOHEIGHT: 30
      WEBSITE_FOOTERTITLE: "Powered by Algonomy"
      LOGGING_LEVEL_ROOT: INFO
      JAVA_OPTS: -Xms512m -Xmx1024m -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/tmp/heap_dump.hprof
      SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE: 10
      SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE: 2
      SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT: 30000
      SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT: 600000
      SPRING_LIQUIBASE_ENABLED: true
    ports:
    - "8080:8080"
    restart: unless-stopped
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 1.5G
        reservations:
          cpus: '0.5'
          memory: 512M
    networks:
    - uptimeo
networks:
  uptimeo:
    name: uptimeo
    external: true
